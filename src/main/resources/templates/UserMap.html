<!DOCTYPE html>

<html xmlns:width="http://www.w3.org/1999/xhtml">

<head>
    <script type="text/javascript" src="jquery-3.3.1.min.js"></script>
    <title> Game Page </title>
    <style>

        h2{
            border-color:black;
            text-align: left;
            color: #000000;
            padding: 0px 250px;
            font-size:50px;
            margin-left:230px;
            margin-right:130px;
            font-family:Papyrus;
        }
        h3{
            border-color:black;
            color:#E8714A;
            font-size:30px;
            font-family:Papyrus;
        }
        h4{
            border-color:black;
            color: #000000;
            font-size:30px;
            font-family:Papyrus;
        }

        body
        {
            background-image: url("background4.jpg");
            background-color: #cccccc;
        }
        .buttoBack{
            background-color: #A65959;
            /*color:blue;*/
            border-color:black;
            border-style:groove;
            cursor: pointer;
        }
        .explanationButton{
            background-color: #A65959;
            /*color:blue;*/
            border-color:black;
            border-style:groove;

            cursor: pointer;
        }
        .button{
            margin-left:30px;
            background-color: #A65959;
            type : "button";
            /*color:blue;*/
            border-color:black;
            border-style:groove;

            cursor: pointer;
        }
        #time{
        }
        #usedWalls{
            color:black;
            font-family:Verdana, Geneva, sans-serif;
            font-size:25px;
            position: absolute;
            left: 700px;
            font-family:Papyrus;
        }
        #level{
            color:white;
            font-family:Verdana, Geneva, sans-serif;
            font-size:25px;
            font-family:Papyrus;
        }
        .putWall{
            /*margin-left:30px;*/
            background-color: #A65959;
            type : "button";
            /*color:blue;*/
            border-color:black;
            border-style:groove;
            cursor: pointer;
        }
        .removeWall{
            /*margin-left:30px;*/
            background-color: #A65959;
            type : "button";
            /*color:blue;*/
            border-color:black;
            border-style:groove;

            cursor: pointer;
        }
        .putKnight{
            /*margin-left:30px;*/
            background-color: #A65959;
            type : "button";
            /*color:blue;*/
            border-color:black;
            border-style:groove;

            cursor: pointer;
        }
        .removeKnight{
            /*margin-left:30px;*/
            background-color: #A65959;
            type : "button";
            /*color:blue;*/
            border-color:black;
            border-style:groove;
            cursor: pointer;
        }
        .controlMap{
            /*margin-left:30px;*/
            background-color: #A65959;
            type : "button";
            /*color:blue;*/
            border-color:black;
            border-style:groove;
            position: absolute;
            bottom: 200px;
            right: 505px;
            cursor: pointer;
        }
        p1
        {
            color:white;
            font-family:Verdana, Geneva, sans-serif;
            font-size:16px;
            text-align: center;
            font-family:Papyrus;

        }

        p2
        {
            color:white;
            font-family:Verdana, Geneva, sans-serif;
            font-size:45px;
            text-align: center;
            font-family:Papyrus;
            position: relative;
            bottom: 600px;
            left: 60px;
        }

        #rotating-item-wrapper {
            position: relative;
            width: 980px;
            height: 347px;
        }
        .rotating-item {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
        }
        #block_container {
            display: flex;
        }
        #map {
            padding: 0px 75px;
        }
        #walls {
            padding: 0px 200px;
        }
        #buttons {

        }
        .newWall {
            height: 200px;
            /*height: 286px;*/
            /*width: 400px;*/
            width: 200px;
            position: absolute;
            bottom: 450px;
        }
        .deleteWall {
            height: 200px;
            /*height: 286px;*/
            /*width: 400px;*/
            width: 200px;
            position: absolute;
            bottom: 450px;
            right: 300px;
        }
        .newKnight {
            height: 200px;
            /*height: 286px;*/
            /*width: 400px;*/
            width: 200px;
            position: absolute;
            bottom: 200px;
        }
        .deleteKnight {
            height: 200px;
            /*height: 286px;*/
            /*width: 400px;*/
            width: 200px;
            position: absolute;
            bottom: 200px;
            right: 300px;
        }
        .rotate90 {
            -webkit-transform: rotate(90deg);
            -moz-transform: rotate(90deg);
            -o-transform: rotate(90deg);
            -ms-transform: rotate(90deg);
            transform: rotate(90deg);
        }
        .demo-image{
            /*padding:20px 100px;*/
            width: 400px;
            height: 397px;
            transform: rotate(0deg);
        }

        table {
            /*padding: 0px 150px;*/
            border-collapse: collapse;
        }

        td {
            border: 7px solid #0800ff;
            width: 150px;
            /*width: 130px;*/
            /*height: 80px;*/
            height: 90px;
        }


    </style>
    <script type>
        var globalWallNumber = 0;
        var puttedWallKeeper;
        var globalMainColor = "#0800ff";
        var globalWallPutted = 0;
        var globalKnightPutted = 0;
        var globalColorUsed = 0;
        var colors = new Array( "#800000","#9A6324","#e6194B","#f58231","#911eb4","#3cb44b","#000000","#469990","#ffe119","#d81600","#bfef45","#fabebe" );

        var globalWallInfos = new Array( 60 );
        for( var i = 0 ; i < 60 ; i++ ){
            globalWallInfos[i] = new Array( 10 );
        }

        $(function() {
            $("#walls").on('click', '.putWall', function() {
                var startX, startXCos;
                var startY, startYCos;
                var value;
                var traveler = $(this).parent();
                traveler = traveler.children(":first").next();
                startX = parseInt( $(traveler).val() );
                traveler = traveler.next().next().next();
                startY = parseInt( $(traveler).val() );
                traveler = traveler.next().next().next();
                var temporaryValue = parseInt( traveler.val() );
                value = "";
                while( temporaryValue ){
                    value = value + "" + parseInt(parseInt(temporaryValue)%10);
                    temporaryValue = parseInt( temporaryValue / 10 );
                }

                value = parseInt(value);

                var map = $(document);
                map = map.children(":first").children(":first").next().children(":first").next().next().children(":first").children(":first").children(":first").children(":first");

                var wallColor = colors[ globalColorUsed ];
                var hexadec = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(wallColor);
                var rgbColor = "rgb(" + parseInt(hexadec[1], 16) + ", " + parseInt(hexadec[2], 16) + ", " + parseInt(hexadec[3], 16) + ")";

                var valueCos = value;
                startXCos = startX;
                startYCos = startY;

                if( startX > 6 || startX < 1 || startY > 6 || startY < 1 ){
                    window.alert("You entered wrong location. Please pick a location where x and y between 1 to 6 !!!!");
                }
                else {

                    var problem = 0;

                    while (value > 0) {
                        var move = parseInt(value % 10);
                        var tempX = startX;
                        var tempY = startY;
                        var tempPoint = map;
                        value /= 10;
                        value = parseInt(value);
                        move %= 4;
                        if (move == 0)
                            move = 4;
                        if (move == 1) {
                            startX -= 1;
                            if (startX == 0) {
                                startX += 1;
                                problem = 1;
                                break;
                            }
                            else if (startY == 1) {
                                tempX -= 1;
                                tempY -= 1;
                                while (tempX > 1) {
                                    tempPoint = tempPoint.next();
                                    tempX -= 1;
                                }
                                tempPoint = tempPoint.children(":first");
                                while (tempY > 1) {
                                    tempPoint = tempPoint.next();
                                    tempY -= 1;
                                }
                                if (tempPoint.css('border-left-color') == 'rgb(8, 0, 255)' || tempPoint.css('border-left-color') == rgbColor) {
                                }
                                else {
                                    problem = 1;
                                }
                            }
                            else {
                                tempX -= 1;
                                tempY -= 1;
                                while (tempX > 1) {
                                    tempPoint = tempPoint.next();
                                    tempX -= 1;
                                }
                                tempPoint = tempPoint.children(":first");
                                while (tempY > 1) {
                                    tempPoint = tempPoint.next();
                                    tempY -= 1;
                                }
                                if (tempPoint.css('border-right-color') == 'rgb(8, 0, 255)' || tempPoint.css('border-right-color') == rgbColor) {
                                }
                                else {
                                    problem = 1;
                                }
                            }
                        }
                        else if (move == 2) {
                            startY += 1;
                            if (startY == 7) {
                                startY -= 1;
                                problem = 1;
                                break;
                            }
                            else if (startX == 1) {
                                while (tempX > 1) {
                                    tempPoint = tempPoint.next();
                                    tempX -= 1;
                                }
                                tempPoint = tempPoint.children(":first");
                                while (tempY > 1) {
                                    tempPoint = tempPoint.next();
                                    tempY -= 1;
                                }
                                if (tempPoint.css('border-top-color') == 'rgb(8, 0, 255)' || tempPoint.css('border-top-color') == rgbColor) {
                                }
                                else {
                                    problem = 1;
                                }
                            }
                            else {
                                tempX -= 1;
                                while (tempX > 1) {
                                    tempPoint = tempPoint.next();
                                    tempX -= 1;
                                }
                                tempPoint = tempPoint.children(":first");
                                while (tempY > 1) {
                                    tempPoint = tempPoint.next();
                                    tempY -= 1;
                                }
                                if (tempPoint.css('border-bottom-color') == 'rgb(8, 0, 255)' || tempPoint.css('border-bottom-color') == rgbColor) {
                                }
                                else {
                                    problem = 1;
                                }
                            }
                        }
                        else if (move == 3) {
                            startX += 1;
                            if (startX == 7) {
                                startX -= 1;
                                problem = 1;
                                break;
                            }
                            else if (startY == 1) {
                                while (tempX > 1) {
                                    tempPoint = tempPoint.next();
                                    tempX -= 1;
                                }
                                tempPoint = tempPoint.children(":first");
                                while (tempY > 1) {
                                    tempPoint = tempPoint.next();
                                    tempY -= 1;
                                }
                                if (tempPoint.css('border-left-color') == 'rgb(8, 0, 255)' || tempPoint.css('border-left-color') == rgbColor) {
                                }
                                else {
                                    problem = 1;
                                }
                            }
                            else {
                                tempY -= 1;
                                while (tempX > 1) {
                                    tempPoint = tempPoint.next();
                                    tempX -= 1;
                                }
                                tempPoint = tempPoint.children(":first");
                                while (tempY > 1) {
                                    tempPoint = tempPoint.next();
                                    tempY -= 1;
                                }
                                if (tempPoint.css('border-right-color') == 'rgb(8, 0, 255)' || tempPoint.css('border-right-color') == rgbColor) {
                                }
                                else {
                                    problem = 1;
                                }
                            }


                        }
                        else if (move == 4) {
                            startY -= 1;
                            if (startY == 0) {
                                startY += 1;
                                problem = 1;
                                break;
                            }
                            else if (startX == 1) {
                                while (tempX > 1) {
                                    tempPoint = tempPoint.next();
                                    tempX -= 1;
                                }
                                tempPoint = tempPoint.children(":first");
                                tempY -= 1;
                                while (tempY > 1) {
                                    tempPoint = tempPoint.next();
                                    tempY -= 1;
                                }
                                if (tempPoint.css('border-top-color') == 'rgb(8, 0, 255)' || tempPoint.css('border-top-color') == rgbColor) {
                                }
                                else {
                                    problem = 1;
                                }
                            }
                            else {
                                tempX -= 1;
                                while (tempX > 1) {
                                    tempPoint = tempPoint.next();
                                    tempX -= 1;
                                }
                                tempPoint = tempPoint.children(":first");
                                tempY -= 1;
                                while (tempY > 1) {
                                    tempPoint = tempPoint.next();
                                    tempY -= 1;
                                }
                                if (tempPoint.css('border-bottom-color') == 'rgb(8, 0, 255)' || tempPoint.css('border-bottom-color') == rgbColor) {
                                }
                                else {
                                    problem = 1;
                                }
                            }
                        }
                    }

                    if (problem == 1) {
                        window.alert("Please choose available location !!!");
                    }

                    else {
                        globalWallInfos[globalWallPutted][0] = startXCos;
                        globalWallInfos[globalWallPutted][1] = startYCos;
                        globalWallInfos[globalWallPutted][2] = valueCos;
                        globalWallInfos[globalWallPutted][3] = rgbColor;
                        globalWallInfos[globalWallPutted][4] = wallColor;
                        $("#wallsAndColors").get(0).innerHTML = $("#wallsAndColors").get(0).innerHTML + '<p style="color:' + wallColor + '\">' + (globalWallPutted+1) + '\'th wall is used</p>';
                        globalWallPutted++;
                        globalColorUsed++;
                        startX = startXCos;
                        startY = startYCos;
                        value = valueCos;
                        while (value > 0) {
                            var move = parseInt(value % 10);
                            var tempX = startX;
                            var tempY = startY;
                            var tempPoint = map;
                            value /= 10;
                            value = parseInt(value);
                            move %= 4;
                            if (move == 0)
                                move = 4;
                            if (move == 1) {
                                startX -= 1;
                                if (startX == 0) {
                                    startX += 1;
                                }
                                else if (startY == 1) {
                                    tempX -= 1;
                                    tempY -= 1;
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-left-color', wallColor);
                                }
                                else {
                                    tempX -= 1;
                                    tempY -= 1;
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-right-color', wallColor);
                                }
                            }
                            else if (move == 2) {
                                startY += 1;
                                if (startY == 7) {
                                    startY -= 1;
                                }
                                else if (startX == 1) {
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-top-color', wallColor);
                                }
                                else {
                                    tempX -= 1;
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-bottom-color', wallColor);
                                }
                            }
                            else if (move == 3) {
                                startX += 1;
                                if (startX == 7) {
                                    startX -= 1;
                                }
                                else if (startY == 1) {
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-left-color', wallColor);
                                }
                                else {
                                    tempY -= 1;
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-right-color', wallColor);
                                }


                            }
                            else if (move == 4) {
                                startY -= 1;
                                if (startY == 0) {
                                    startY += 1;
                                }
                                else if (startX == 1) {
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    tempY -= 1;
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-top-color', wallColor);
                                }
                                else {
                                    tempX -= 1;
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    tempY -= 1;
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-bottom-color', wallColor);
                                }
                            }
                        }
                    }
                }
            })
        });
        $(function() {
            $("#walls").on('click', '.removeWall', function(){
                    var startX;
                    var startY;
                    var value;
                    var rgbColor;
                    var traveler = $(this).parent();
                    traveler = traveler.children(":first").next();
                    var num = $(traveler).val();

                    var map = $(document);
                    map = map.children(":first").children(":first").next().children(":first").next().next().children(":first").children(":first").children(":first").children(":first");

                    if( num > globalWallPutted ){
                        window.alert("Invalid wall number, please try again !!!");
                    }
                    else{
                       startX = globalWallInfos[num-1][0];
                       startY = globalWallInfos[num-1][1];
                       value = globalWallInfos[num-1][2];
                       rgbColor = globalWallInfos[num-1][3];
                        while (value > 0) {
                            var move = parseInt(value % 10);
                            var tempX = startX;
                            var tempY = startY;
                            var tempPoint = map;
                            value /= 10;
                            value = parseInt(value);
                            move %= 4;
                            if (move == 0)
                                move = 4;
                            if (move == 1) {
                                startX -= 1;
                                if (startX == 0) {
                                    startX += 1;
                                }
                                else if (startY == 1) {
                                    tempX -= 1;
                                    tempY -= 1;
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-left-color', globalMainColor);
                                }
                                else {
                                    tempX -= 1;
                                    tempY -= 1;
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-right-color', globalMainColor);
                                }
                            }
                            else if (move == 2) {
                                startY += 1;
                                if (startY == 7) {
                                    startY -= 1;
                                }
                                else if (startX == 1) {
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-top-color', globalMainColor);
                                }
                                else {
                                    tempX -= 1;
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-bottom-color', globalMainColor);
                                }
                            }
                            else if (move == 3) {
                                startX += 1;
                                if (startX == 7) {
                                    startX -= 1;
                                }
                                else if (startY == 1) {
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-left-color', globalMainColor);
                                }
                                else {
                                    tempY -= 1;
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-right-color', globalMainColor);
                                }


                            }
                            else if (move == 4) {
                                startY -= 1;
                                if (startY == 0) {
                                    startY += 1;
                                }
                                else if (startX == 1) {
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    tempY -= 1;
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-top-color', globalMainColor);
                                }
                                else {
                                    tempX -= 1;
                                    while (tempX > 1) {
                                        tempPoint = tempPoint.next();
                                        tempX -= 1;
                                    }
                                    tempPoint = tempPoint.children(":first");
                                    tempY -= 1;
                                    while (tempY > 1) {
                                        tempPoint = tempPoint.next();
                                        tempY -= 1;
                                    }
                                    tempPoint.css('border-bottom-color', globalMainColor);
                                }
                            }
                        }
                        for( var i = num ; i < globalWallPutted ; i++ ){
                            globalWallInfos[i-1][0] = globalWallInfos[i][0];
                            globalWallInfos[i-1][1] = globalWallInfos[i][1];
                            globalWallInfos[i-1][2] = globalWallInfos[i][2];
                            globalWallInfos[i-1][3] = globalWallInfos[i][3];
                            globalWallInfos[i-1][4] = globalWallInfos[i][4];
                        }
                        globalWallPutted--;
                        $("#wallsAndColors").get(0).innerHTML = '<p style="color: #000000">Walls Number and Colors</p>';
                        for( var i = 0 ; i < globalWallPutted ; i++ ) {
                            $("#wallsAndColors").get(0).innerHTML = $("#wallsAndColors").get(0).innerHTML + '<p style="color:' + globalWallInfos[i][4] + '\">' + (i + 1) + '\'th wall is used</p>';
                        }
                    }
                }
            )
        });
        $(function() {
            $("#walls").on('click', '.putKnight', function () {
                var newKnightX;
                var newKnightY;
                var knightSpecification;
                var traveler = $(this).parent();
                traveler = traveler.children(":first").next();
                newKnightX = $(traveler).val();
                traveler = traveler.next().next().next();
                newKnightY = $(traveler).val();
                traveler = traveler.next().next().next();
                knightSpecification = traveler.val();
                var map = $(document);
                map = map.children(":first").children(":first").next().children(":first").next().next().children(":first").children(":first").children(":first").children(":first");
                if( newKnightX < 1 || newKnightX > 5 || newKnightY < 1 || newKnightY > 5 || knightSpecification < 1  || knightSpecification > 3 ){
                    window.alert("Please re-set values of new knight !!!");
                }
                else {
                    var tempPoint;
                    tempPoint = map;
                    while (newKnightX > 1) {
                        tempPoint = tempPoint.next();
                        newKnightX -= 1;
                    }
                    tempPoint = tempPoint.children(":first");
                    while (newKnightY > 1) {
                        tempPoint = tempPoint.next();
                        newKnightY -= 1;
                    }
                    tempPoint.get(0).innerHTML = "" ;
                    globalKnightPutted++;
                    if (knightSpecification == 1)
                        tempPoint.append( '<img src="redKnight.jpg" align="center" width="100%" height="100%" />' );
                    else if (knightSpecification == 2)
                        tempPoint.append( '<img src="blueKnight.jpg" align="center" width="100%" height="100%" />' );
                    else
                        tempPoint.append( '<img src="whiteKnight2.jpg" align="center" width="100%" height="100%" />' );
                }
            });
        });
        $(function () {
            $("#walls").on('click', '.removeKnight', function () {
                var newKnightX;
                var newKnightY;
                var knightSpecification;
                var traveler = $(this).parent();
                traveler = traveler.children(":first").next();
                newKnightX = $(traveler).val();
                traveler = traveler.next().next().next();
                newKnightY = $(traveler).val();
                var map = $(document);
                map = map.children(":first").children(":first").next().children(":first").next().next().children(":first").children(":first").children(":first").children(":first");
                if( newKnightX < 1 || newKnightX > 5 || newKnightY < 1 || newKnightY > 5 ){
                    window.alert("Please re-set values of new knight !!!");
                }
                else {
                    var tempPoint;
                    tempPoint = map;
                    while (newKnightX > 1) {
                        tempPoint = tempPoint.next();
                        newKnightX -= 1;
                    }
                    tempPoint = tempPoint.children(":first");
                    while (newKnightY > 1) {
                        tempPoint = tempPoint.next();
                        newKnightY -= 1;
                    }
                    if( tempPoint.get(0).innerHTML != "" && globalKnightPutted != 0 ) {
                        globalKnightPutted--;
                        tempPoint.get(0).innerHTML = "";
                    }
                    else{
                        window.alert("There is not any knight in your location !!!");
                    }
                }
            })
        });
        $(function () {
            $("#walls").on('click', '.controlMap', function () {
                var changedValue = 0;
                var controlMap = new Array(30);
                var roadsNode = new Array(30);
                var walls  = "";
                var redKnights = "";
                var redKnighNumber = 0;
                var blueKnights = "";
                var blueKnightNumber = 0;
                var whiteKnights = "";
                var whiteKnightNumber = 0;
                for (var i = 0; i < 30; i++) {
                    controlMap[i] = new Array(30);
                    roadsNode[i] = new Array(30);
                    for (var j = 0; j < 30; j++) {
                        controlMap[i][j] = 0;
                        roadsNode[i][j] = 0;
                    }
                }

                if( globalKnightPutted == 0 ){
                    window.alert("Your map does not contain any knight. Please re-create your map!!!");
                }
                else {

                    var map = $(document);
                    map = map.children(":first").children(":first").next().children(":first").next().next().children(":first").children(":first").children(":first").children(":first");
                    var row1traveler = map;
                    var row2traveler = row1traveler;
                    row2traveler = row2traveler.next();
                    var row3traveler = row2traveler;
                    row3traveler = row3traveler.next();
                    var row4traveler = row3traveler;
                    row4traveler = row4traveler.next();
                    var row5traveler = row4traveler;
                    row5traveler = row5traveler.next();

                    row1traveler = row1traveler.children(":first");
                    row2traveler = row2traveler.children(":first");
                    row3traveler = row3traveler.children(":first");
                    row4traveler = row4traveler.children(":first");
                    row5traveler = row5traveler.children(":first");

                    for (var i = 0; i < 5; i++) {
                        if (row1traveler.css("border-top-color") == 'rgb(8, 0, 255)' || i == 0 && row1traveler.css("border-left-color") == 'rgb(8, 0, 255)' || i == 4 && row1traveler.css("border-right-color") == 'rgb(8, 0, 255)') {
                            changedValue++;
                            controlMap[0][i] = 1;
                        }
                        row1traveler = row1traveler.next();
                    }

                    if (row2traveler.css("border-left-color") == 'rgb(8, 0, 255)') {
                        changedValue++;
                        controlMap[1][0] = 1;
                    }
                    row2traveler = row2traveler.next().next().next().next();

                    if (row2traveler.css("border-right-color") == 'rgb(8, 0, 255)') {
                        changedValue++;
                        controlMap[1][4] = 1;
                    }

                    if (row3traveler.css("border-left-color") == 'rgb(8, 0, 255)') {
                        changedValue++;
                        controlMap[2][0] = 1;
                    }
                    row3traveler = row3traveler.next().next().next().next();

                    if (row3traveler.css("border-right-color") == 'rgb(8, 0, 255)') {
                        changedValue++;
                        controlMap[2][4] = 1;
                    }

                    if (row4traveler.css("border-left-color") == 'rgb(8, 0, 255)') {
                        changedValue++;
                        controlMap[3][0] = 1;
                    }
                    row4traveler = row4traveler.next().next().next().next();

                    if (row4traveler.css("border-right-color") == 'rgb(8, 0, 255)') {
                        changedValue++;
                        controlMap[3][4] = 1;
                    }

                    for (var i = 0; i < 5; i++) {
                        if (row5traveler.css("border-bottom-color") == 'rgb(8, 0, 255)' || i == 0 && row5traveler.css("border-left-color") == 'rgb(8, 0, 255)' || i == 4 && row5traveler.css("border-right-color") == 'rgb(8, 0, 255)') {
                            changedValue++;
                            controlMap[4][i] = 1;
                        }
                        row5traveler = row5traveler.next();
                    }

                    var rowtraveller = map;
                    var columntraveller;

                    for (var i = 0; i < 5; i++) {
                        columntraveller = rowtraveller;
                        columntraveller = columntraveller.children(":first");
                        for (var j = 0; j < 5; j++) {
                            if (i != 4) {
                                if (columntraveller.css("border-bottom-color") == 'rgb(8, 0, 255)') {
                                    roadsNode[i * 5 + j][(i + 1) * 5 + j] = roadsNode[(i + 1) * 5 + j][i * 5 + j] = 1;
                                }
                            }
                            if (j != 4) {
                                if (columntraveller.css("border-right-color") == 'rgb(8, 0, 255)') {
                                    roadsNode[i * 5 + j][i * 5 + j + 1] = roadsNode[i * 5 + j + 1][i * 5 + j] = 1;
                                }
                            }
                            columntraveller = columntraveller.next();
                        }
                        rowtraveller = rowtraveller.next();
                    }

                    while (changedValue) {
                        changedValue = 0;
                        var affectorRow = map;
                        for (var i = 0; i < 5; i++) {
                            for (var j = 0; j < 5; j++) {
                                if (controlMap[i][j]) {
                                    if (i > 0 && roadsNode[i * 5 + j][(i - 1) * 5 + j] && !controlMap[i - 1][j]) {
                                        controlMap[i - 1][j] = 1;
                                        changedValue++;
                                    }
                                    if (j > 0 && roadsNode[i * 5 + j][i * 5 + j - 1] && !controlMap[i][j - 1]) {
                                        controlMap[i][j - 1] = 1;
                                        changedValue++;
                                    }
                                    if (j < 4 && roadsNode[i * 5 + j][i * 5 + j + 1] && !controlMap[i][j + 1]) {
                                        controlMap[i][j + 1] = 1;
                                        changedValue++;
                                    }
                                    if (i < 4 && roadsNode[i * 5 + j][(i + 1) * 5 + j] && !controlMap[i + 1][j]) {
                                        controlMap[i + 1][j] = 1;
                                        changedValue++
                                    }
                                }
                            }
                        }
                    }
                    var result = 0;
                    row1traveler = map;
                    row2traveler = row1traveler;
                    row2traveler = row2traveler.next();
                    row3traveler = row2traveler;
                    row3traveler = row3traveler.next();
                    row4traveler = row3traveler;
                    row4traveler = row4traveler.next();
                    row5traveler = row4traveler;
                    row5traveler = row5traveler.next();

                    row1traveler = row1traveler.children(":first");
                    row2traveler = row2traveler.children(":first");
                    row3traveler = row3traveler.children(":first");
                    row4traveler = row4traveler.children(":first");
                    row5traveler = row5traveler.children(":first");

                    for (var i = 0; i < 5; i++) {
                        if (row1traveler.get(0).innerHTML == '<img src="redKnight.jpg" align="center" width="100%" height="100%">') {
                            redKnighNumber++;
                            if( redKnights == "" )
                                redKnights = ((i+1)*10+j+1);
                            else
                                redKnights = redKnights + " " +((i+1)*10+j+1);
                            if (!controlMap[0][i]) {
                                result = 1;
                            }
                        }
                        else if (row1traveler.get(0).innerHTML == '<img src="blueKnight.jpg" align="center" width="100%" height="100%">') {
                            blueKnightNumber++;
                            if( blueKnights == "" )
                                blueKnights = ((i+1)*10+j+1);
                            else
                                blueKnights = blueKnights + " " +((i+1)*10+j+1);
                            if (controlMap[0][i]) {
                                result = 1;
                            }

                        }
                        else if (row1traveler.get(0).innerHTML == '<img src="whiteKnight2.jpg" align="center" width="100%" height="100%">') {
                            whiteKnightNumber++;
                            if( whiteKnights == "" )
                                whiteKnights = ((i+1)*10+j+1);
                            else
                                whiteKnights = whiteKnights + " " +((i+1)*10+j+1);
                        }
                        row1traveler = row1traveler.next();
                    }
                    for (var i = 0; i < 5; i++) {
                        if (row2traveler.get(0).innerHTML == '<img src="redKnight.jpg" align="center" width="100%" height="100%">') {
                            redKnighNumber++;
                            if( redKnights == "" )
                                redKnights = ((i+1)*10+j+1);
                            else
                                redKnights = redKnights + " " +((i+1)*10+j+1);
                            if (!controlMap[1][i]) {
                                result = 1;
                            }
                        }
                        else if (row2traveler.get(0).innerHTML == '<img src="blueKnight.jpg" align="center" width="100%" height="100%">') {
                            blueKnightNumber++;
                            if( blueKnights == "" )
                                blueKnights = ((i+1)*10+j+1);
                            else
                                blueKnights = blueKnights + " " +((i+1)*10+j+1);
                            if (controlMap[1][i]) {
                                result = 1;
                            }

                        }
                        else if (row2traveler.get(0).innerHTML == '<img src="whiteKnight2.jpg" align="center" width="100%" height="100%">') {
                            whiteKnightNumber++;
                            if( whiteKnights == "" )
                                whiteKnights = ((i+1)*10+j+1);
                            else
                                whiteKnights= whiteKnights + " " +((i+1)*10+j+1);
                        }
                        row2traveler = row2traveler.next();
                    }
                    for (var i = 0; i < 5; i++) {
                        if (row3traveler.get(0).innerHTML == '<img src="redKnight.jpg" align="center" width="100%" height="100%">') {
                            redKnighNumber++;
                            if( redKnights == "" )
                                redKnights = ((i+1)*10+j+1);
                            else
                                redKnights = redKnights + " " +((i+1)*10+j+1);
                            if (!controlMap[2][i]) {
                                result = 1;
                            }
                        }
                        else if (row3traveler.get(0).innerHTML == '<img src="blueKnight.jpg" align="center" width="100%" height="100%">') {
                            blueKnightNumber++;
                            if( blueKnights == "" )
                                blueKnights = ((i+1)*10+j+1);
                            else
                                blueKnights = blueKnights + " " +((i+1)*10+j+1);
                            if (controlMap[2][i]) {
                                result = 1;
                            }

                        }
                        else if (row3traveler.get(0).innerHTML == '<img src="whiteKnight2.jpg" align="center" width="100%" height="100%">') {
                            whiteKnightNumber++;
                            if( whiteKnights == "" )
                                whiteKnights = ((i+1)*10+j+1);
                            else
                                whiteKnights = whiteKnights + " " +((i+1)*10+j+1);
                        }
                        row3traveler = row3traveler.next();
                    }
                    for (var i = 0; i < 5; i++) {
                        if (row4traveler.get(0).innerHTML == '<img src="redKnight.jpg" align="center" width="100%" height="100%">') {
                            redKnighNumber++;
                            if( redKnights == "" )
                                redKnights = ((i+1)*10+j+1);
                            else
                                redKnights = redKnights + " " +((i+1)*10+j+1);
                            if (!controlMap[3][i]) {
                                result = 1;
                            }
                        }
                        else if (row4traveler.get(0).innerHTML == '<img src="blueKnight.jpg" align="center" width="100%" height="100%">') {
                            blueKnightNumber++;
                            if( blueKnights == "" )
                                blueKnights = ((i+1)*10+j+1);
                            else
                                blueKnights = blueKnights + " " +((i+1)*10+j+1);
                            if (controlMap[3][i]) {
                                result = 1;
                            }

                        }
                        else if (row4traveler.get(0).innerHTML == '<img src="whiteKnight2.jpg" align="center" width="100%" height="100%">') {
                            whiteKnightNumber++;
                            if( whiteKnights == "" )
                                whiteKnights = ((i+1)*10+j+1);
                            else
                                whiteKnights= whiteKnights + " " +((i+1)*10+j+1);
                        }
                        row4traveler = row4traveler.next();
                    }
                    for (var i = 0; i < 5; i++) {
                        if (row5traveler.get(0).innerHTML == '<img src="redKnight.jpg" align="center" width="100%" height="100%">') {
                            redKnighNumber++;
                            if( redKnights == "" )
                                redKnights = ((i+1)*10+j+1);
                            else
                                redKnights = redKnights + " " +((i+1)*10+j+1);
                            if (!controlMap[4][i]) {
                                result = 1;
                            }
                        }
                        else if (row5traveler.get(0).innerHTML == '<img src="blueKnight.jpg" align="center" width="100%" height="100%">') {
                            blueKnightNumber++;
                            if( blueKnights == "" )
                                blueKnights = ((i+1)*10+j+1);
                            else
                                blueKnights = blueKnights+ " " +((i+1)*10+j+1);
                            if (controlMap[4][i]) {
                                result = 1;
                            }

                        }
                        else if (row5traveler.get(0).innerHTML == '<img src="whiteKnight2.jpg" align="center" width="100%" height="100%">') {
                            whiteKnightNumber++;
                            if( whiteKnights == "" )
                                whiteKnights = ((i+1)*10+j+1);
                            else
                                whiteKnights= whiteKnights + " " +((i+1)*10+j+1);
                        }
                        row5traveler = row5traveler.next();
                    }

                    if (result) {
                        window.alert("Your map is invalid. Please re-check the knight or wall positions !!!!");
                    }
                    else {
                        window.alert("Your map was valid and accepted to evaluation. Thank you very much for helping us :D");
                        var newMap = map;
                        newMap = newMap.get(0).parentElement.parentElement.parentElement;
                        newMap.innerHTML = "<table><tr><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr></table>";

                        var localWallInfo = "" + globalWallPutted;
                        for (var i = 0; i < globalWallPutted; i++) {
                            var local = parseInt(globalWallInfos[i][2]);
                            globalWallInfos[i][2] = 0;
                            while (local) {
                                globalWallInfos[i][2] *= 10;
                                globalWallInfos[i][2] += local % 10;
                                local = parseInt(local / 10);
                            }
                            localWallInfo = localWallInfo + " " + globalWallInfos[i][0] + " " + globalWallInfos[i][1] + " " + globalWallInfos[i][2] + " " + globalWallInfos[i][4];
                        }
                        globalWallPutted = 0;
                        globalColorUsed = 0;
                        $("#wallsAndColors").get(0).innerHTML = '<p style="color: #000000">Walls Number and Colors</p>';
                        $.ajax({
                            url: "newUserMap",
                            data: {
                                "redKnightNumber": redKnighNumber,
                                "redKnightLocation": redKnights,
                                "blueKnightNumber": blueKnightNumber,
                                "blueKnightLocation": blueKnights,
                                "whiteKnightNumber": whiteKnightNumber,
                                "whiteKnightLocation": whiteKnights,
                                "wallNumber": globalWallPutted,
                                "wallInfo": localWallInfo
                            }
                        }).done(function (data) {
                        });
                    }
                }
            })
        });
        $(function () {
            $("#buttons").on('click', '.explanationButton', function () {
                window.alert("In this page, on the left side you have your map. On the right side, you have wall placement tools and knight placement tools. Next to them is the where you delete the materials from the map.\n\nWhen planting a wall, you need to specify its X coordinate (from top to bottom 1-6) and Y coordinate (from left to right 1-6)" +
                    " and its direction. Specifying directions is done by using;\n1 for upwards\n2 for right\n3 for downwards\n4 for left.\n For example you can describe a 3-length wall with 2 unit upwards and 1 unit to the left by '114'\n" +
                    "\n\nYou should then put some knights. You can put the knight by providing their X and Y coordinate and the type.\nUse 1 for Red Knights\n2 for Blue Knights\n3 for White Knights" +
                    "When you are done, submit your map to let us check and determine its difficulty. Then we will use your map in the future challenges." +
                    "\nThank you very much for your contribution !");
            })
        });


    </script>

</head>
<body>
<div id="buttons">
    <button class = "button buttoBack" onclick="location.href = 'MAINMENU'" style="position:absolute; left: 50px;"> <p1>MAIN MENU</p1> </button>
    <button class = "explanationButton" style="position: absolute; right: 300px;"> <p1>Explanation</p1> </button>
</div>
<div>
    <div >
        <h2>Creating New Map</h2>
        <h4 style="position:relative; bottom: -45px; padding: 0px 70px;">1 ------------ 2 ------------ 3 ------------ 4 ------------ 5 ------------ 6</h4>
        <h4 style="position:absolute; bottom: 580px; padding: 0px 55px;">1</h4>
        <h4 style="position:absolute; bottom: 490px; padding: 0px 55px;">2</h4>
        <h4 style="position:absolute; bottom: 390px; padding: 0px 55px;">3</h4>
        <h4 style="position:absolute; bottom: 290px; padding: 0px 55px;">4</h4>
        <h4 style="position:absolute; bottom: 190px; padding: 0px 55px;">5</h4>
        <h4 style="position:absolute; bottom: 95px; padding: 0px 55px;">6</h4>
    </div>
</div>

<div id="block_container">
    <div id="map">

        <table>

            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>

            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>

            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>

            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>

            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>

        </table>


    </div>
    <div id="walls">
        <div class="deleteWall">
            Wall Number:<br><input type="number" name="WallSpecification"><br>
            <button type="submit" class="removeWall">Remove wall from the map</button>
        </div>
        <div class="newWall">
            X coordinate:<br><input type="number" name="Xcoordinate"><br>Y coordinate:<br><input type="number" name="Ycoordinate"><br>
            Wall Specification:<br><input type="number" name="WallSpecification"><br>
            <button type="submit" class="putWall">Put new wall to the map</button>
        </div>
        <div class="deleteKnight">
            X coordinate:<br><input type="number" name="Xcoordinate"><br>Y coordinate:<br><input type="number" name="Ycoordinate"><br>
            <button type="submit" class="removeKnight">Remove knight from map</button>
        </div>
        <div class="newKnight">
            X coordinate:<br><input type="number" name="Xcoordinate"><br>Y coordinate:<br><input type="number" name="Ycoordinate"><br>
            Knight Type:<br><input type="number" name="KnightType"><br>
            <button type="submit" class="putKnight">Put new knight to the map</button>
        </div>
        <button type="submit" class="controlMap">Send Map</button>
    </div>

    <div id="wallsAndColors" style="overflow: scroll; position: absolute; right: 800px;">
        <p style="color: #000000">Walls Number and Colors</p>
    </div>
</div>
</body>
</html>